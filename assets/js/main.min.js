function basic_cards(){$("main").html("<div class='basic_cards_container'></div>"),$.each(JSONobj[model[0]][0],function(e,a){title("div.basic_cards_container",a.Title,"alternate"),render_basic_cards(a.Text,"emphasis_small")})}function render_basic_cards(e,a){$("div.basic_cards_container").append('<div class="basic_cards '+a+'">'+e+"</div>")}function handle(e,a,s,i,t){this.model=e,this.url=a,this.href=s,this.type=i,this.object_ID=t,this.JSONconfirm=function(s){var i=s||0;i<e.length?"undefined"==typeof JSONobj[e[i]]||JSONobj[e[i]].length<1?$.getJSON(baseURL+"/JSONroute.php",{url:a},function(e){$.each(e,function(e,a){JSONobj[e]=a}),JSONconfirm(i+1)}):JSONconfirm(i+1):render(this.type,this.href)},JSONconfirm()}function render(e,a){switch(e){case"small_cards":small_cards(a);break;case"large_cards":large_cards(a);break;case"basic_cards":basic_cards();break;case"render_home":render_home()}}function getBaseURL(){var e=location.href,a=e.substring(0,e.indexOf("/",14));if(-1!=a.indexOf("http://localhost")){var e=location.href,s=location.pathname,i=e.indexOf(s),t=e.indexOf("/",i+1),r=e.substr(0,t);return r+"/"}return a+"/"}function getSVG(e,a){$.get(baseURL+e,function(e){$(a).html(e)},"text")}function title(e,a,s){$(e).before('<div class="heading_strip '+s+'"><div class="heading_wrapper"><h3 class="heading">'+a+"</b></h3></div></div>")}function includes_cards(e){$("main").append("<div id='includes_cards_container'></div>"),title("div#includes_cards_container","Includes","regular"),$.each(JSONobj[model[0]][0],function(a,s){s.ID===e&&render_includes_cards("div#includes_cards_container",s.Includes)})}function render_includes_cards(e,a){$(e).append("<div class='container'><div><div class='emphasis_medium'>"+a+"<div class='fade'><a href=# class='more'>Expand</a></div></div></div></div>").children(".container").fadeIn()}function large_cards(e){$("main").html("<div id='large_cards_container'></div>");var a=e.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()});title("div#large_cards_container",a.split("/")[1],"alternate"),$.each(JSONobj[model[0]][0],function(a,s){s.ID===object_ID&&render_large_cards("div#large_cards_container",e,s.ID,s.Image,s.Name,s.Price,s.Overview,s.Duration)})}function render_large_cards(e,a,s,i,t,r,n){switch($(e).append("<div class='container'><div><div><img src='"+baseURL+i+"'/></div><div><span class='emphasis_large'>"+t+"</span>"+(void 0==r?"":"<span class='emphasis_medium'>From <b>USD "+r+"</b></span>")+"<p class='summary'>"+n+"</p><div class='fade'><a href=# class='more'>Expand</a></div></div></div></div>").children(".container").fadeIn(),a.split("/")[0]){case"stay":rooms_cards(s);break;case"packages":includes_cards(s)}}function pageLoad(){$("main").children().fadeOut(function(){$(this).remove()});var e=window.location.pathname,e=e.split("/")[2],a=e.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()});a||(a="Home");var s=window.location.href;window.history.pushState("","Title",baseURL+e);var i=a;e.indexOf("home")>-1?handle(req_models[i],s,e,"render_home",null):e.indexOf("about")>-1||e.indexOf("contact")>-1?handle(req_models[i],s,e,"basic_cards",null):handle(req_models[i],s,e,"small_cards",null)}function render_home(){$("main").append("<div id='slideshow'><ul id='controls'></ul><ul id='slides'></ul><div>"),$("main").append("<div id='carousel_section' class='carousel_packages'><div id='carousel'></div><ul id='controls'><li><a href=# data-func='next'></a></li><li><a href=# data-func='prev'></a></li></ul><div>"),$("main").append("<div id='customer_quote'><ul id='controls'></ul><div class='quote_container'></div></div>"),getSVG("assets/icons/arrow.svg","div#carousel_section #controls a");new slideshow("div#slideshow",JSONobj.Slideshow[0],9e3,500),new carousel_obj("div#carousel_section",JSONobj.Packages[0],4,"State","Featured","packages");$.each(JSONobj.Quotes[0],function(e,a){state=0==e?"active":"inactive",$("div#customer_quote #controls").append("<li><a href=# data-id='"+a.ID+"' class='"+state+"'></a></li>"),$("div#customer_quote .quote_container").append("<div data-id='"+a.ID+"' class='"+state+"'><p class='emphasis_large'>"+a.Text+"</p><p class='summary'>"+a.Name+"</p></div>")}),$("div#customer_quote").before('<div class="heading_strip"><div class="heading_wrapper"><h3 class="heading">Customer <b>Feedback</b></h3></div></div>'),$("div#carousel_section").before('<div class="heading_strip" style="margin-top:0"><div class="heading_wrapper"><h3 class="heading">Featured <b>Packages</b></h3></div></div>')}function rooms_cards(e){$("main").append("<div id='rooms_cards_container'></div>"),title("div#rooms_cards_container","Rooms","regular"),$.each(JSONobj[model[1]][0],function(a,s){s.ResortID===e&&render_rooms_cards("div#rooms_cards_container",s.Image,s.RoomType,s.Overview)})}function render_rooms_cards(e,a,s,i){$(e).append("<div class='container'><div><div><img src='"+baseURL+a+"'/></div><div><span class='emphasis_large'>"+s+"</span><p class='summary'>"+i+"</p><div class='fade'><a href=# class='more'>Expand</a></div></div></div></div>").children(".container").fadeIn()}function small_cards(e){$("main").html("<div id='small_cards_container'></div>");var a=e.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()});title("div#small_cards_container",a,"alternate"),$.each(JSONobj[model[0]][0],function(a,s){render_small_cards("div#small_cards_container",e,s.ID,s.Image,s.Name,s.Price,s.Overview,s.Duration)})}function render_small_cards(e,a,s,i,t,r,n,c,d){if("rightt"===d)var o="100px";else var o="-100px";$(e).append("<div class='container'><div><a href='"+a+"/"+t+"' data-id='"+s+"' data-req='"+a+"_details'><div><img src='"+i+"'/>"+(void 0==r?"":"<span class='emphasis_small'>From <b>USD "+r+"</b></span>")+"</div><div><span class='emphasis_large'>"+t+"</span><p class='summary'>"+n+"</p><div class='fade'></div></div></a><div><img src='assets/icons/Duration.svg' height='15'/><span class='smallest'>"+c+" days</span><div class='social'><a href=# class='facebook'></a><a href=# class='twitter'></a></div></div></div></div>").children(":last").css("margin-left",o).animate({opacity:"1","margin-left":"0"},700),getSVG("assets/icons/facebook.svg",e+" .social a.facebook"),getSVG("assets/icons/twitter.svg",e+" .social a.twitter")}var carousel_obj=function(e,a,s,i,t,r){var n=this;this.container=e,this.data=a,this.num_rows=s,this.filter_key=i,this.filter_val=t,this.href=r,this.page=1,this.state="State",this.init=function(){n.render_handle(),n.control(),n.anchor()},this.control=function(){var e=n.data.length/n.num_rows;$(document).on("click",n.container+" #controls a",function(a){"next"===$(this).attr("data-func")?n.page<e&&(n.page++,n.render_handle("left")):n.page>1&&(n.page--,n.render_handle("right")),a.preventDefault()})},this.render_handle=function(e){start_key=(n.page-1)*n.num_rows,end_key=start_key+n.num_rows-1,$(n.container+" div#carousel .container").fadeOut().remove(),$.each(n.data,function(a,s){s[n.filter_key]===n.filter_val&&a>=start_key&&end_key>=a&&render_small_cards("div#carousel",n.href,s.ID,s.Image,s.Name,s.Price,s.Overview,s.Duration,e)})},this.anchor=function(){$(document).on("click",this.container+" #carousel a",function(e){$("main").children().fadeOut(function(){$(this).remove()});var a=$(this).attr("href"),s=(a.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}),$(this).prop("href"));window.history.pushState("","Title",baseURL+a);var i=$(this).attr("data-req");object_ID=$(this).attr("data-id"),handle(req_models[i],s,a,"large_cards",object_ID),e.preventDefault()})},this.init()};$(document).ready(function(){pageLoad(),$(document).on("click","a#menu",function(){$(this).hasClass("active")?($(this).removeClass("active").children("svg").attr("class",""),$("header#small div#header_right, header#small nav#left").css({"margin-left":"100%"})):($(this).addClass("active").children("svg").attr("class","active"),$("header#small div#header_right, header#small nav#left").css({"margin-left":"0"}))}),$(document).on("click","nav a",function(e){$("main").children().fadeOut(function(){$(this).remove()});var a=$(this).attr("href"),s=(a.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}),$(this).prop("href"));window.history.pushState("","Title",baseURL+a);var i=$(this).attr("data-req");$(this).parents("nav#right").length?handle(req_models[i],s,a,"basic_cards",null):a.indexOf("home")>-1?handle(req_models[i],s,a,"render_home",null):handle(req_models[i],s,a,"small_cards",null),e.preventDefault()}),$(document).on("click","div#small_cards_container a",function(e){$("main").children().fadeOut(function(){$(this).remove()});var a=$(this).attr("href"),s=(a.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}),$(this).prop("href"));window.history.pushState("","Title",baseURL+a);var i=$(this).attr("data-req");object_ID=$(this).attr("data-id"),handle(req_models[i],s,a,"large_cards",object_ID),e.preventDefault()}),$(document).on("click","div#customer_quote #controls a",function(e){var a=$("div#customer_quote .quote_container .active"),s=$(this).attr("data-id");$(a).animate({opacity:0},150).removeClass("active"),$("div#customer_quote div[data-id="+s+"]").delay(200).animate({opacity:1},150).addClass("active"),$("div#customer_quote #controls a.active").css({"background-color":"#bfc0c2"}).removeClass("active"),$("div#customer_quote #controls a[data-id="+s+"]").css({"background-color":"#30bec1"}).addClass("active"),e.preventDefault()}),$(document).on("click","div#large_cards_container a,div#rooms_cards_container a,div#includes_cards_container a",function(e){"more"===$(this).attr("class")?($(this).parent().parent().closest("div").css({height:"auto"},200),$(this).html("Minimize").attr("class","less"),$(this).parent().css({height:"40px"})):($(this).parent().parent().closest("div").css({height:"200px"},200),$(this).html("Expand").attr("class","more"),$(this).parent().css({height:"70px"})),e.preventDefault()})}),JSONobj={};var baseURL=getBaseURL(),req_models={Home:["Slideshow","Packages","Quotes"],Packages:["Packages"],Stay:["Resorts","Packages"],About:["About"],Contact:["Contact"],stay_details:["Resorts","Rooms"],packages_details:["Packages"]},slideshow=function(e,a,s,i){var t=this,r="",n="";this.container=e,this.slides=a,this.interval=s,this.speed=i,this.init=function(){t.render();var e=setInterval(t.trigger,t.interval);$(document).on("click",t.container+" #controls a",function(a){var s=$(this).attr("data-id");t.slide(s),clearInterval(e),e=setInterval(t.trigger,t.interval),a.preventDefault()})},this.trigger=function(){var e=$("div#slideshow #slides li.active");next=$(e).is(":last-child")?1:parseInt(e.attr("data-id"))+1,t.slide(next)},this.slide=function(e){$(t.container+" #slides li").animate({opacity:0},t.speed).removeClass("active"),$(t.container+" #slides li[ data-id = "+e+"]").animate({opacity:1},t.speed).addClass("active"),$(t.container+" #controls a").removeClass("active"),$(t.container+" #controls a[ data-id = "+e+"]").addClass("active")},this.render=function(){$.each(t.slides,function(e,a){state=0===e?"active":"inactive",n+="<li><a href=# data-id='"+a.ID+"' class='"+state+"'></a></li>",r+="<li data-id='"+a.ID+"' class='"+state+"'><div class='slide' style='background:url(\""+a.Image+"\")'></div><div class='text'><p class='emphasis_large'>"+a.Title+"</p><p class='emphasis_small'>"+a.Text+"</p><a href=# class='details'>Details</a></div></li>"}),$(t.container+" #controls").append(n),$(t.container+" #slides").append(r)},this.init()};